<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adivina Qui√©n - Juego a Distancia</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #1a3a5f;
            color: #f0f8ff;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: #2c5282;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 20px;
            background-color: #1e3c72;
            border-radius: 10px;
            margin-bottom: 25px;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            color: #ffcc00;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        h2 {
            color: #ffcc00;
            margin-bottom: 15px;
            border-bottom: 2px solid #ffcc00;
            padding-bottom: 5px;
        }
        
        .game-instructions {
            background-color: #2d4a7c;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
        }
        
        .instructions-list {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        
        .instructions-list li {
            margin-bottom: 8px;
        }
        
        .highlight {
            background-color: #3a5f9e;
            padding: 3px 8px;
            border-radius: 5px;
            font-weight: bold;
        }
        
        .game-area {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .player-board {
            flex: 1;
            min-width: 300px;
            background-color: #2d4a7c;
            padding: 20px;
            border-radius: 10px;
        }
        
        .secret-character {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            background-color: #1e3c72;
            border-radius: 10px;
        }
        
        .secret-name {
            font-size: 1.5rem;
            color: #ffcc00;
            font-weight: bold;
            margin-top: 10px;
        }
        
        .characters-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .character-card {
            background-color: #3a5f9e;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .character-card:hover {
            transform: scale(1.05);
            border-color: #ffcc00;
        }
        
        .character-card.selected {
            background-color: #1e3c72;
            border-color: #ffcc00;
        }
        
        .character-card.eliminated {
            opacity: 0.4;
            filter: grayscale(80%);
            cursor: not-allowed;
        }
        
        .character-img {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin: 0 auto 8px;
            background-color: #5a7bb5;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
        }
        
        .character-name {
            font-size: 0.85rem;
            font-weight: bold;
        }
        
        .controls {
            background-color: #2d4a7c;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
        }
        
        .question-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .question-btn {
            padding: 12px;
            background-color: #ffcc00;
            color: #1a3a5f;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .question-btn:hover {
            background-color: #ffd633;
            transform: translateY(-3px);
        }
        
        .question-btn:disabled {
            background-color: #7a6b3d;
            cursor: not-allowed;
            transform: none;
        }
        
        .guess-section {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
            margin-top: 20px;
        }
        
        .guess-select {
            flex: 1;
            min-width: 200px;
            padding: 12px;
            border-radius: 8px;
            border: none;
            background-color: #3a5f9e;
            color: white;
            font-size: 1rem;
        }
        
        .action-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .guess-btn {
            background-color: #4CAF50;
            color: white;
        }
        
        .guess-btn:hover {
            background-color: #45a049;
        }
        
        .reset-btn {
            background-color: #f44336;
            color: white;
        }
        
        .reset-btn:hover {
            background-color: #d32f2f;
        }
        
        .game-log {
            background-color: #2d4a7c;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
        }
        
        .log-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .log-content {
            height: 200px;
            overflow-y: auto;
            background-color: #1e3c72;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
        }
        
        .log-entry {
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px solid #3a5f9e;
        }
        
        .log-entry:last-child {
            border-bottom: none;
        }
        
        .remote-play-instructions {
            background-color: #1e3c72;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .call-icon {
            color: #4CAF50;
            margin-right: 10px;
        }
        
        footer {
            text-align: center;
            padding: 15px;
            margin-top: 20px;
            color: #a0c8ff;
            font-size: 0.9rem;
        }
        
        .player-turn {
            color: #ffcc00;
            font-weight: bold;
            font-size: 1.2rem;
            text-align: center;
            margin-bottom: 15px;
            padding: 10px;
            background-color: #1e3c72;
            border-radius: 8px;
        }
        
        @media (max-width: 768px) {
            .game-area {
                flex-direction: column;
            }
            
            .characters-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            h1 {
                font-size: 2.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-users"></i> Adivina Qui√©n - Juego a Distancia</h1>
            <p>Juega con un amigo por videollamada o llamada telef√≥nica</p>
        </header>
        
        <div class="game-instructions">
            <h2><i class="fas fa-info-circle"></i> Instrucciones para jugar a distancia</h2>
            <ul class="instructions-list">
                <li><span class="highlight">Paso 1:</span> Llama a un amigo por videollamada o tel√©fono.</li>
                <li><span class="highlight">Paso 2:</span> Ambos jugadores abren esta p√°gina en sus dispositivos.</li>
                <li><span class="highlight">Paso 3:</span> Cada uno selecciona un personaje secreto (no se lo digas a tu oponente).</li>
                <li><span class="highlight">Paso 4:</span> Por turnos, haz preguntas de s√≠/no sobre el personaje de tu oponente.</li>
                <li><span class="highlight">Paso 5:</span> Basado en la respuesta, elimina personajes que no coincidan con la caracter√≠stica.</li>
                <li><span class="highlight">Paso 6:</span> Cuando creas saber el personaje, ¬°haz tu intento de adivinanza!</li>
            </ul>
            <p><strong>Gana el primero que adivine correctamente el personaje secreto del oponente.</strong></p>
        </div>
        
        <div class="game-area">
            <div class="player-board">
                <h2><i class="fas fa-user"></i> Tu Tablero</h2>
                <div class="secret-character">
                    <div class="character-img">?</div>
                    <div class="secret-name">Personaje Secreto</div>
                    <p>Selecciona tu personaje secreto haciendo clic en uno de los personajes abajo</p>
                </div>
                
                <h3>Personajes disponibles</h3>
                <div class="characters-grid" id="characters-grid">
                    <!-- Los personajes se generar√°n con JavaScript -->
                </div>
            </div>
            
            <div class="player-board">
                <h2><i class="fas fa-user-friends"></i> Tablero del Oponente</h2>
                <div class="secret-character">
                    <div class="character-img">?</div>
                    <div class="secret-name">Personaje del Oponente</div>
                    <p>Tu objetivo es adivinar este personaje</p>
                </div>
                
                <h3>Personajes del oponente</h3>
                <div class="characters-grid" id="opponent-grid">
                    <!-- Los personajes se generar√°n con JavaScript -->
                </div>
            </div>
        </div>
        
        <div class="player-turn" id="turn-indicator">
            Turno: <span id="current-turn">Jugador 1</span>
        </div>
        
        <div class="controls">
            <h2><i class="fas fa-gamepad"></i> Controles del Juego</h2>
            <p>Haz preguntas a tu oponente por llamada y marca la respuesta:</p>
            
            <div class="question-buttons" id="question-buttons">
                <!-- Los botones de pregunta se generar√°n con JavaScript -->
            </div>
            
            <div style="text-align: center; margin: 20px 0;">
                <button class="question-btn" id="yes-btn" style="background-color: #4CAF50; margin-right: 10px;">
                    <i class="fas fa-check"></i> Respuesta: S√ç
                </button>
                <button class="question-btn" id="no-btn" style="background-color: #f44336;">
                    <i class="fas fa-times"></i> Respuesta: NO
                </button>
            </div>
            
            <div class="guess-section">
                <select class="guess-select" id="guess-select">
                    <option value="">Selecciona un personaje para adivinar...</option>
                </select>
                <button class="action-btn guess-btn" id="guess-btn">
                    <i class="fas fa-bullseye"></i> Adivinar Personaje
                </button>
                <button class="action-btn reset-btn" id="reset-btn">
                    <i class="fas fa-redo"></i> Reiniciar Juego
                </button>
            </div>
        </div>
        
        <div class="game-log">
            <div class="log-title">
                <h2><i class="fas fa-clipboard-list"></i> Registro del Juego</h2>
                <button class="action-btn" id="clear-log" style="background-color: #607d8b; color: white;">
                    <i class="fas fa-trash"></i> Limpiar Registro
                </button>
            </div>
            <div class="log-content" id="game-log">
                <!-- El registro del juego se mostrar√° aqu√≠ -->
            </div>
        </div>
        
        <div class="remote-play-instructions">
            <h2><i class="fas fa-phone-alt call-icon"></i> C√≥mo jugar a distancia</h2>
            <p>Para jugar con un amigo a distancia, sigue estos pasos:</p>
            <ol class="instructions-list">
                <li>Haz una videollamada o llamada telef√≥nica con tu amigo.</li>
                <li>Ambos deben abrir este juego en sus dispositivos.</li>
                <li>Decidan qui√©n ser√° el Jugador 1 y qui√©n el Jugador 2.</li>
                <li>El Jugador 1 comienza haciendo una pregunta sobre el personaje del Jugador 2.</li>
                <li>El Jugador 2 responde honestamente "S√ç" o "NO" por la llamada.</li>
                <li>El Jugador 1 marca la respuesta en su juego (botones S√ç/NO arriba).</li>
                <li>Contin√∫en alternando turnos hasta que alguien adivine correctamente.</li>
            </ol>
            <p><strong>Consejo:</strong> En videollamada, pueden mostrar sus pantallas para verificar las respuestas, ¬°pero cuidado con revelar tu personaje secreto!</p>
        </div>
        
        <footer>
            <p>Juego "Adivina Qui√©n" - Versi√≥n para jugar a distancia | Dise√±ado para horas de diversi√≥n</p>
            <p>Juega con un amigo por videollamada o llamada telef√≥nica</p>
        </footer>
    </div>

    <script>
        // Datos de los personajes
        const characters = [
            { id: 1, name: "Ana", gender: "mujer", hairColor: "rubio", glasses: false, hat: false, mustache: false, eyeColor: "azul" },
            { id: 2, name: "Carlos", gender: "hombre", hairColor: "negro", glasses: true, hat: false, mustache: true, eyeColor: "marron" },
            { id: 3, name: "Beatriz", gender: "mujer", hairColor: "casta√±o", glasses: false, hat: true, mustache: false, eyeColor: "verde" },
            { id: 4, name: "David", gender: "hombre", hairColor: "rojo", glasses: false, hat: false, mustache: false, eyeColor: "azul" },
            { id: 5, name: "Elena", gender: "mujer", hairColor: "rubio", glasses: true, hat: false, mustache: false, eyeColor: "marron" },
            { id: 6, name: "Fernando", gender: "hombre", hairColor: "casta√±o", glasses: false, hat: true, mustache: true, eyeColor: "verde" },
            { id: 7, name: "Gabriela", gender: "mujer", hairColor: "negro", glasses: false, hat: false, mustache: false, eyeColor: "azul" },
            { id: 8, name: "H√©ctor", gender: "hombre", hairColor: "rojo", glasses: true, hat: false, mustache: false, eyeColor: "marron" },
            { id: 9, name: "Isabel", gender: "mujer", hairColor: "casta√±o", glasses: true, hat: true, mustache: false, eyeColor: "verde" },
            { id: 10, name: "Javier", gender: "hombre", hairColor: "rubio", glasses: false, hat: false, mustache: true, eyeColor: "azul" },
            { id: 11, name: "Karen", gender: "mujer", hairColor: "negro", glasses: false, hat: true, mustache: false, eyeColor: "marron" },
            { id: 12, name: "Luis", gender: "hombre", hairColor: "casta√±o", glasses: true, hat: false, mustache: false, eyeColor: "verde" }
        ];

        // Preguntas disponibles
        const questions = [
            { id: 1, text: "¬øTu personaje es mujer?", attribute: "gender", value: "mujer" },
            { id: 2, text: "¬øTu personaje es hombre?", attribute: "gender", value: "hombre" },
            { id: 3, text: "¬øTu personaje tiene el pelo rubio?", attribute: "hairColor", value: "rubio" },
            { id: 4, text: "¬øTu personaje tiene el pelo negro?", attribute: "hairColor", value: "negro" },
            { id: 5, text: "¬øTu personaje tiene el pelo casta√±o?", attribute: "hairColor", value: "casta√±o" },
            { id: 6, text: "¬øTu personaje tiene el pelo rojo?", attribute: "hairColor", value: "rojo" },
            { id: 7, text: "¬øTu personaje usa lentes?", attribute: "glasses", value: true },
            { id: 8, text: "¬øTu personaje usa sombrero?", attribute: "hat", value: true },
            { id: 9, text: "¬øTu personaje tiene bigote?", attribute: "mustache", value: true },
            { id: 10, text: "¬øTu personaje tiene ojos azules?", attribute: "eyeColor", value: "azul" },
            { id: 11, text: "¬øTu personaje tiene ojos marrones?", attribute: "eyeColor", value: "marron" },
            { id: 12, text: "¬øTu personaje tiene ojos verdes?", attribute: "eyeColor", value: "verde" }
        ];

        // Estado del juego
        let gameState = {
            secretCharacter: null,
            opponentSecretCharacter: null,
            currentTurn: 1, // 1 o 2
            playerCharacters: [...characters],
            opponentCharacters: [...characters],
            gameActive: false,
            gameLog: [],
            questionAsked: null,
            gameOver: false
        };

        // Inicializar el juego
        function initGame() {
            // Crear tablero de personajes
            const charactersGrid = document.getElementById('characters-grid');
            const opponentGrid = document.getElementById('opponent-grid');
            charactersGrid.innerHTML = '';
            opponentGrid.innerHTML = '';
            
            // Crear botones de preguntas
            const questionButtons = document.getElementById('question-buttons');
            questionButtons.innerHTML = '';
            
            questions.forEach(question => {
                const button = document.createElement('button');
                button.className = 'question-btn';
                button.textContent = question.text;
                button.dataset.id = question.id;
                button.addEventListener('click', () => askQuestion(question));
                questionButtons.appendChild(button);
            });
            
            // Llenar opciones para adivinar
            const guessSelect = document.getElementById('guess-select');
            guessSelect.innerHTML = '<option value="">Selecciona un personaje para adivinar...</option>';
            characters.forEach(character => {
                const option = document.createElement('option');
                option.value = character.id;
                option.textContent = character.name;
                guessSelect.appendChild(option);
            });
            
            // Crear elementos de personajes
            characters.forEach(character => {
                // Para el jugador
                const charElement = createCharacterElement(character, false);
                charactersGrid.appendChild(charElement);
                
                // Para el oponente
                const opponentCharElement = createCharacterElement(character, true);
                opponentGrid.appendChild(opponentCharElement);
            });
            
            // Actualizar UI
            updateGameUI();
            
            // Agregar mensaje inicial al registro
            addToLog('¬°Juego iniciado! Selecciona tu personaje secreto haciendo clic en uno de los personajes de "Tu Tablero".');
            addToLog('Despu√©s, llama a un amigo para empezar a jugar.');
        }

        // Crear elemento de personaje
        function createCharacterElement(character, isOpponent) {
            const div = document.createElement('div');
            div.className = 'character-card';
            div.dataset.id = character.id;
            
            // Determinar emoji para el personaje
            let emoji = 'üë§';
            if (character.gender === 'mujer') emoji = 'üë©';
            if (character.gender === 'hombre') emoji = 'üë®';
            if (character.hat) emoji = character.gender === 'mujer' ? 'üëí' : 'üß¢';
            if (character.glasses) emoji = character.gender === 'mujer' ? 'üë©‚Äçü¶∞' : 'üë®‚Äçü¶∞';
            if (character.mustache) emoji = 'üë®';
            
            div.innerHTML = `
                <div class="character-img">${emoji}</div>
                <div class="character-name">${character.name}</div>
            `;
            
            if (!isOpponent) {
                // Para el jugador: seleccionar personaje secreto
                div.addEventListener('click', () => selectSecretCharacter(character));
            }
            
            return div;
        }

        // Seleccionar personaje secreto
        function selectSecretCharacter(character) {
            if (gameState.gameActive && !gameState.gameOver) {
                addToLog('El juego ya comenz√≥. No puedes cambiar tu personaje secreto.');
                return;
            }
            
            gameState.secretCharacter = character;
            gameState.gameActive = true;
            
            // Marcar el personaje seleccionado
            document.querySelectorAll('#characters-grid .character-card').forEach(card => {
                card.classList.remove('selected');
                if (parseInt(card.dataset.id) === character.id) {
                    card.classList.add('selected');
                }
            });
            
            // Actualizar el √°rea de personaje secreto
            const secretName = document.querySelector('.secret-character .secret-name');
            secretName.textContent = character.name;
            
            const secretImg = document.querySelector('.secret-character .character-img');
            secretImg.innerHTML = getCharacterEmoji(character);
            
            addToLog(`Has seleccionado a ${character.name} como tu personaje secreto.`);
            addToLog('Ahora llama a tu amigo y comienza el juego. El Jugador 1 (T√∫) comienza preguntando.');
            
            updateGameUI();
        }

        // Obtener emoji para el personaje
        function getCharacterEmoji(character) {
            let emoji = 'üë§';
            if (character.gender === 'mujer') emoji = 'üë©';
            if (character.gender === 'hombre') emoji = 'üë®';
            if (character.hat) emoji = character.gender === 'mujer' ? 'üëí' : 'üß¢';
            if (character.glasses) emoji = character.gender === 'mujer' ? 'üë©‚Äçü¶∞' : 'üë®‚Äçü¶∞';
            if (character.mustache) emoji = 'üë®';
            return emoji;
        }

        // Hacer una pregunta
        function askQuestion(question) {
            if (!gameState.gameActive || gameState.gameOver) {
                addToLog('El juego no ha comenzado o ya termin√≥.');
                return;
            }
            
            if (gameState.currentTurn !== 1) {
                addToLog('No es tu turno. Espera a que tu oponente responda.');
                return;
            }
            
            if (!gameState.secretCharacter) {
                addToLog('Primero selecciona tu personaje secreto.');
                return;
            }
            
            gameState.questionAsked = question;
            
            addToLog(`Pregunta: "${question.text}"`);
            addToLog('Pregunta a tu oponente por llamada y marca la respuesta (S√ç/NO).');
            
            // Habilitar botones de respuesta
            document.getElementById('yes-btn').disabled = false;
            document.getElementById('no-btn').disabled = false;
            
            updateGameUI();
        }

        // Procesar respuesta a la pregunta
        function processAnswer(answer) {
            if (!gameState.questionAsked) {
                addToLog('Primero haz una pregunta.');
                return;
            }
            
            const question = gameState.questionAsked;
            const isYes = answer === 'yes';
            
            addToLog(`Respuesta del oponente: ${isYes ? 'S√ç' : 'NO'}`);
            
            // Filtrar personajes del oponente basado en la respuesta
            const filteredCharacters = gameState.opponentCharacters.filter(character => {
                const characterValue = character[question.attribute];
                const questionValue = question.value;
                
                if (isYes) {
                    return characterValue === questionValue;
                } else {
                    return characterValue !== questionValue;
                }
            });
            
            gameState.opponentCharacters = filteredCharacters;
            
            // Marcar personajes eliminados en el tablero del oponente
            document.querySelectorAll('#opponent-grid .character-card').forEach(card => {
                const charId = parseInt(card.dataset.id);
                const isStillAvailable = filteredCharacters.some(char => char.id === charId);
                
                if (!isStillAvailable) {
                    card.classList.add('eliminated');
                }
            });
            
            // Cambiar turno
            gameState.currentTurn = 2;
            gameState.questionAsked = null;
            
            // Deshabilitar botones de respuesta
            document.getElementById('yes-btn').disabled = true;
            document.getElementById('no-btn').disabled = true;
            
            addToLog('Turno del oponente. Espera a que te haga una pregunta por llamada.');
            
            updateGameUI();
        }

        // Intentar adivinar el personaje
        function attemptGuess() {
            if (!gameState.gameActive || gameState.gameOver) {
                addToLog('El juego no ha comenzado o ya termin√≥.');
                return;
            }
            
            if (gameState.currentTurn !== 1) {
                addToLog('No es tu turno. Espera a que tu oponente responda.');
                return;
            }
            
            const guessSelect = document.getElementById('guess-select');
            const selectedCharacterId = parseInt(guessSelect.value);
            
            if (!selectedCharacterId) {
                addToLog('Selecciona un personaje para adivinar.');
                return;
            }
            
            const guessedCharacter = characters.find(c => c.id === selectedCharacterId);
            
            addToLog(`¬°Intento de adivinanza! ¬øTu oponente es ${guessedCharacter.name}?`);
            addToLog('Pregunta a tu oponente por llamada si es correcto.');
            addToLog('Si es correcto, ¬°ganaste! Si no, pierdes tu turno.');
            
            // Aqu√≠ normalmente el oponente responder√≠a por llamada
            // Por simplicidad, asumiremos que el jugador puede marcar manualmente si gan√≥ o no
            
            // Crear botones para el resultado de la adivinanza
            const logDiv = document.getElementById('game-log');
            const resultDiv = document.createElement('div');
            resultDiv.className = 'log-entry';
            resultDiv.innerHTML = `
                <p>¬øTu oponente confirm√≥ que tu adivinanza es correcta?</p>
                <button id="guess-correct-btn" class="question-btn" style="background-color: #4CAF50; margin-right: 10px;">
                    <i class="fas fa-check"></i> S√≠, ¬°gan√©!
                </button>
                <button id="guess-wrong-btn" class="question-btn" style="background-color: #f44336;">
                    <i class="fas fa-times"></i> No, me equivoqu√©
                </button>
            `;
            logDiv.appendChild(resultDiv);
            logDiv.scrollTop = logDiv.scrollHeight;
            
            // Agregar eventos a los botones de resultado
            document.getElementById('guess-correct-btn').addEventListener('click', () => finishGame(true, guessedCharacter));
            document.getElementById('guess-wrong-btn').addEventListener('click', () => handleWrongGuess());
            
            updateGameUI();
        }

        // Manejar adivinanza incorrecta
        function handleWrongGuess() {
            addToLog('Adivinanza incorrecta. Pierdes tu turno.');
            gameState.currentTurn = 2;
            
            // Eliminar el mensaje de resultado
            const logDiv = document.getElementById('game-log');
            const lastEntry = logDiv.lastElementChild;
            if (lastEntry && lastEntry.querySelector('#guess-correct-btn')) {
                logDiv.removeChild(lastEntry);
            }
            
            addToLog('Turno del oponente. Espera a que te haga una pregunta por llamada.');
            updateGameUI();
        }

        // Terminar el juego
        function finishGame(isWinner, guessedCharacter = null) {
            gameState.gameOver = true;
            gameState.gameActive = false;
            
            if (isWinner) {
                addToLog(`¬°FELICIDADES! Adivinaste correctamente. Tu oponente era ${guessedCharacter.name}. ¬°GANASTE!`);
                
                // Mostrar el personaje del oponente
                const opponentSecret = document.querySelectorAll('.player-board')[1].querySelector('.secret-character');
                opponentSecret.querySelector('.secret-name').textContent = guessedCharacter.name;
                opponentSecret.querySelector('.character-img').innerHTML = getCharacterEmoji(guessedCharacter);
            }
            
            updateGameUI();
        }

        // Reiniciar el juego
        function resetGame() {
            gameState = {
                secretCharacter: null,
                opponentSecretCharacter: null,
                currentTurn: 1,
                playerCharacters: [...characters],
                opponentCharacters: [...characters],
                gameActive: false,
                gameLog: [],
                questionAsked: null,
                gameOver: false
            };
            
            initGame();
            
            // Restablecer el √°rea de personaje secreto
            const secretNames = document.querySelectorAll('.secret-name');
            secretNames.forEach(el => el.textContent = 'Personaje Secreto');
            
            const secretImgs = document.querySelectorAll('.secret-character .character-img');
            secretImgs.forEach(el => el.innerHTML = '?');
            
            // Limpiar clases de los personajes
            document.querySelectorAll('.character-card').forEach(card => {
                card.classList.remove('selected', 'eliminated');
            });
            
            // Deshabilitar botones de respuesta
            document.getElementById('yes-btn').disabled = true;
            document.getElementById('no-btn').disabled = true;
            
            addToLog('Juego reiniciado. Selecciona tu personaje secreto para comenzar.');
        }

        // Agregar mensaje al registro
        function addToLog(message) {
            const timestamp = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            const logEntry = {
                time: timestamp,
                message: message
            };
            
            gameState.gameLog.push(logEntry);
            
            const logDiv = document.getElementById('game-log');
            const entryDiv = document.createElement('div');
            entryDiv.className = 'log-entry';
            entryDiv.innerHTML = `<strong>[${timestamp}]</strong> ${message}`;
            logDiv.appendChild(entryDiv);
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        // Actualizar la interfaz de usuario
        function updateGameUI() {
            // Actualizar indicador de turno
            const turnIndicator = document.getElementById('current-turn');
            if (gameState.currentTurn === 1) {
                turnIndicator.textContent = 'Tu turno (Jugador 1)';
                document.getElementById('turn-indicator').style.backgroundColor = '#1e3c72';
            } else {
                turnIndicator.textContent = 'Turno del oponente (Jugador 2)';
                document.getElementById('turn-indicator').style.backgroundColor = '#3a5f9e';
            }
            
            // Habilitar/deshabilitar controles seg√∫n el estado del juego
            const questionButtons = document.querySelectorAll('.question-btn:not(#yes-btn):not(#no-btn)');
            const guessBtn = document.getElementById('guess-btn');
            
            if (gameState.gameOver || !gameState.gameActive) {
                questionButtons.forEach(btn => btn.disabled = true);
                guessBtn.disabled = true;
            } else {
                questionButtons.forEach(btn => btn.disabled = gameState.currentTurn !== 1);
                guessBtn.disabled = gameState.currentTurn !== 1;
            }
        }

        // Limpiar el registro
        function clearLog() {
            const logDiv = document.getElementById('game-log');
            logDiv.innerHTML = '';
            gameState.gameLog = [];
            addToLog('Registro limpiado.');
        }

        // Inicializar eventos cuando el DOM est√© listo
        document.addEventListener('DOMContentLoaded', () => {
            initGame();
            
            // Eventos para botones de respuesta
            document.getElementById('yes-btn').addEventListener('click', () => processAnswer('yes'));
            document.getElementById('no-btn').addEventListener('click', () => processAnswer('no'));
            
            // Evento para adivinar
            document.getElementById('guess-btn').addEventListener('click', attemptGuess);
            
            // Evento para reiniciar
            document.getElementById('reset-btn').addEventListener('click', resetGame);
            
            // Evento para limpiar registro
            document.getElementById('clear-log').addEventListener('click', clearLog);
            
            // Deshabilitar botones de respuesta inicialmente
            document.getElementById('yes-btn').disabled = true;
            document.getElementById('no-btn').disabled = true;
            
            // Simular que el oponente tambi√©n selecciona un personaje secreto
            // En un juego real, esto lo har√≠a el oponente en su dispositivo
            setTimeout(() => {
                // Seleccionar aleatoriamente un personaje para el oponente (simulaci√≥n)
                const randomIndex = Math.floor(Math.random() * characters.length);
                gameState.opponentSecretCharacter = characters[randomIndex];
            }, 1000);
        });
    </script>
</body>
</html>